<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebApp Test</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>TG WebApp API test</h1>
    <pre id="loadResult"></pre>
    <button id="share1">share1</button>
    <button id="share2">share2</button>

    <script src="https://daccess1.github.io/scripts/index.js?v=2"></script>
    <script type="text/javascript">
        window.addEventListener('load', () => {
            window.Telegram.WebApp.expand();
            document.getElementById('loadResult').innerHTML = JSON.stringify(getUserData());
        });

        document.getElementById('share1').addEventListener('click', (e) => {
            window.TelegramWebviewProxy.postEvent(
                "web_app_open_tg_link",
                {
                    path_full: "/share/url?text=Share"
                });
        });

        document.getElementById('share2').addEventListener('click', (e) => {
            window.parent.postMessage(JSON.stringify({eventType: "web_app_open_tg_link", eventData: {path_full: "/share/url?text=Share"}}), '*');
        });

        function getUserData() {
            const decoded = decodeURI(window.Telegram.WebApp.initData);
            return decoded;
        }
    </script>
</body>
</html>