<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WebApp Test</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <h1>TG WebApp API test</h1>
    <pre id="loadResult"></pre>

    <script src="https://daccess1.github.io/scripts/index.js?v=2"></script>
    <script type="text/javascript">
        window.addEventListener('load', () => {
            window.Telegram.WebApp.expand();
            document.getElementById('loadResult').innerHTML = JSON.stringify(getUserData());
        });

        function getUserData() {
            const decoded = decodeURI(window.Telegram.WebApp.initData);
            const str = decoded.substring(decoded.indexOf('{') + 1, decoded.indexOf('}'));
            return JSON.parse(decodeURI(str));
        }
    </script>
</body>
</html>